# Configurações de Data Augmentation

# Configurações por tamanho de dataset
dataset_size_thresholds:
  small: 20000    # <20k: augmentação pesada
  medium: 50000   # <50k: augmentação moderada
  large: 50000    # ≥50k: augmentação leve

# Augmentações para treino - Dataset Pequeno (<20k)
train_heavy_cnn:
  resize:
    enabled: true
    size: null  # Definido por MedicalImagePreprocessor

  horizontal_flip:
    enabled: true
    probability: 0.5

  rotation:
    enabled: true
    limit: 5
    probability: 0.4

  affine:
    enabled: true
    scale: [0.95, 1.05]
    translate_percent: [-0.05, 0.05]
    rotate: [-3, 3]
    probability: 0.3

  clahe:
    enabled: true
    clip_limit: 2.0
    tile_grid_size: [4, 4]
    probability: 0.7

  brightness_contrast:
    enabled: true
    brightness_limit: 0.1
    contrast_limit: 0.15
    probability: 0.6

  random_gamma:
    enabled: true
    gamma_limit: [90, 110]
    probability: 0.5

  blur_sharpen:
    enabled: true
    gaussian_blur:
      blur_limit: [1, 3]
    sharpen:
      alpha: [0.1, 0.3]
      lightness: [0.7, 1.0]
    probability: 0.3

train_heavy_transformer:
  resize:
    enabled: true
    size: null  # Definido por MedicalImagePreprocessor

  horizontal_flip:
    enabled: true
    probability: 0.4

  rotation:
    enabled: true
    limit: 3
    probability: 0.3

  clahe:
    enabled: true
    clip_limit: 1.5
    tile_grid_size: [6, 6]
    probability: 0.5

  brightness_contrast:
    enabled: true
    brightness_limit: 0.08
    contrast_limit: 0.1
    probability: 0.4

# Augmentações para treino - Dataset Médio (<50k)
train_moderate:
  resize:
    enabled: true
    size: null  # Definido por MedicalImagePreprocessor

  horizontal_flip:
    enabled: true
    probability: 0.5

  rotation:
    enabled: true
    limit: 3
    probability: 0.3

  clahe:
    enabled: true
    clip_limit: 1.5
    tile_grid_size: [6, 6]
    probability: 0.5

  brightness_contrast:
    enabled: true
    brightness_limit: 0.08
    contrast_limit: 0.1
    probability: 0.4

  random_gamma:
    enabled: true
    gamma_limit: [95, 105]
    probability: 0.3

  gaussian_blur:
    enabled: true
    blur_limit: [1, 2]
    probability: 0.1

# Augmentações para treino - Dataset Grande (≥50k)
train_light:
  resize:
    enabled: true
    size: null  # Definido por MedicalImagePreprocessor

  horizontal_flip:
    enabled: true
    probability: 0.3

  rotation:
    enabled: true
    limit: 2
    probability: 0.2

  clahe:
    enabled: true
    clip_limit: 1.2
    tile_grid_size: [8, 8]
    probability: 0.3

  brightness_contrast:
    enabled: true
    brightness_limit: 0.05
    contrast_limit: 0.05
    probability: 0.2

# Augmentações sintéticas para classes minoritárias - CNN
synthetic_cnn:
  vertical_flip:
    enabled: true
    probability: 0.3

  affine:
    enabled: true
    translate_percent:
      x: [-0.1, 0.1]
      y: [-0.1, 0.1]
    scale: [0.85, 1.15]
    rotate: [-10, 10]
    probability: 0.6

  elastic_transform:
    enabled: true
    alpha: 1
    sigma: 20
    probability: 0.3

  random_tone_curve:
    enabled: true
    scale: 0.2
    probability: 0.5

  equalize:
    enabled: true
    probability: 0.3

  color_jitter:
    enabled: true
    brightness: 0.15
    contrast: 0.2
    saturation: 0.0
    hue: 0.0
    probability: 0.5

  gauss_noise:
    enabled: true
    std_range: [0.05, 0.15]
    mean_range: [0.0, 0.0]
    probability: 0.4

  iso_noise:
    enabled: true
    color_shift: [0.01, 0.05]
    intensity: [0.1, 0.3]
    probability: 0.3

# Augmentações sintéticas para classes minoritárias - Transformer
synthetic_transformer:
  vertical_flip:
    enabled: true
    probability: 0.3

  affine:
    enabled: true
    translate_percent:
      x: [-0.08, 0.08]
      y: [-0.08, 0.08]
    scale: [0.9, 1.1]
    rotate: [-7, 7]
    probability: 0.5

  random_tone_curve:
    enabled: true
    scale: 0.15
    probability: 0.4

  color_jitter:
    enabled: true
    brightness: 0.1
    contrast: 0.15
    saturation: 0.0
    hue: 0.0
    probability: 0.4

  gauss_noise:
    enabled: true
    std_range: [0.05, 0.15]
    mean_range: [0.0, 0.0]
    probability: 0.4

# Configurações para validação e teste
validation:
  resize:
    enabled: true
    size: null  # Definido por MedicalImagePreprocessor

test:
  resize:
    enabled: true
    size: null  # Definido por MedicalImagePreprocessor

# Normalização (definida por MedicalImagePreprocessor por arquitetura)
normalization:
  mean: null  # Definido por arquitetura
  std: null   # Definido por arquitetura

# Configurações de augmentação de classes minoritárias
minority_augmentation:
  strategies:
    balance:
      description: "Iguala quantidade da classe minoritária com a majoritária"
    ratio:
      description: "Define proporção entre minoritária e majoritária"
      default_ratio: 0.6
    proportional:
      description: "Aumenta classe minoritária em 1.5x"
      multiplier: 1.5

  random_seed:
    base: 42
    per_class_offset: true  # Adiciona class_id ao seed base